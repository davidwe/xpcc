<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--	Based on the "Golden Gate" Design by Free CSS Templates
		http://www.freecsstemplates.org -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta http-equiv="content-language" content="de" />
	<title>XPCC &raquo; Eclipse</title>
	
	<meta name="robots" content="index" />
	<meta name="keywords" content="XPCC, Communication, Robot, AVR, CAN, TCP/IP, TIPC, C++, RCA, Roboterclub Aachen" />
	<meta name="author" content="Roboterclub Aachen e.V." />
	<meta name="description" content="XPCC is a packet orientated communication library, that enables a transparent communication between various plattforms" />
	
	<link rel="stylesheet" type="text/css" href="default.css" media="screen" />
	<link rel="stylesheet" type="text/css" href="screenshot.css" media="screen" />
	
	<link rel="icon" href="favicon.png" type="image/png" />
	<link rel="shortcut icon" href="favicon.png" type="image/png" />
	
	<script type="text/javascript" src="highslide/highslide.js"></script>
	<script type="text/javascript" src="highslide/highslide.config.js" charset="utf-8"></script>
	<link rel="stylesheet" type="text/css" href="highslide/highslide.css" media="screen" />
	<!--[if lt IE 7]>
	<link rel="stylesheet" type="text/css" href="highslide/highslide-ie6.css" />
	<![endif]-->
</head>

<body>
<div id="menu">
	<ul id="main">
		<li class="current_page"><a href="#">Home</a></li>
		<li><a href="https://sourceforge.net/projects/xpcc/develop">Development</a></li>
		<li><a href="https://sourceforge.net/apps/trac/xpcc/">Wiki</a></li>
		<li><a href="http://xpcc.sourceforge.net/api">API Documentation</a></li>
		<li><a href="https://sourceforge.net/projects/xpcc/develop">Download</a></li>
		<li><a href="http://www.roboterclub.rwth-aachen.de/cms">Roboterclub Aachen e.V.</a></li>
	</ul>
</div>

<div id="wrapper">
<div id="page">
	<div id="content">
		<h1>Eclipse als Entwicklungsumgebung</h1>
		
		<p>Eclipse ist eine sehr mächtige IDE. Das bedeutet leider auch das es
		sehr viel einzustellen gibt. Hat man dies aber einmal erledigt kann man
		sehr effizient damit arbeiten.</p>
		
		<p>Einige sehr nützliche Features sind zum Beispiel:
		<ul>
			<li>Im Editor kann durch <em>Strg + Linksklick</em> auf einen Funktionsaufruf
				direkt zu der Deklaration der entsprechenden Funktion gesprungen werden.
				Fährt man mit dem Mauszeiger über ein Element, für das Quelltext-Dokumentation
				vorhanden ist, so wird diese in einem Pop-up-Fenster angezeigt.</li>
			<li>Wird der Cursor auf eine Variable gesetzt, so werden diese und alle
				weiteren Vorkommen derselben im Dokument farbig unterlegt, in einer
				Leiste am rechten Rand des Editors werden sie als kleine farbige Striche
				angezeigt, die als Links zu den entsprechenden Stellen im Quelltext fungieren.</li>
			<li>Code-Faltung.</li>
			<li>Unterstützung von Quellcodevervollständigung mittels <em>Strg + Leertaste</em>.</li>
			<li>Subversion Integration</li>
		</ul></p>
		
		<h2>Installation</h2>
		
		<div>
			<a href="images/eclipse/eclipse_download.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_download.thumb.png" class="screenshot" alt="" /></a>
			<p>Lade die aktuellste Version von <a href="http://eclipse.org/downloads/"><em>Eclipse IDE for C/C++ Developers</em></a>
			herunter und installiere sie. Diese Version enthält neben der Kern IDE
			auch die <a href="http://www.eclipse.org/cdt/downloads.php">C/C++ Erweitung (CDT)</a>.
			Hat man schon ein bestehende Eclipse Installation reicht es die CDT-Erweitung
			nachzuinstallieren.</p>
		</div>
		
		<div>
			<a href="images/eclipse/eclipse_startscreen.png" class="highslide" onclick="return hs.expand(this)" title="Startscreen">
				<img src="images/eclipse/eclipse_startscreen.thumb.png" class="screenshot" alt="Startscreen" /></a>
			<p>Vom Startscreen geht es zur Workbench.</p>
		</div>
		
		<h2>Neues Projekt</h2>
		
		<div>
			<a href="images/eclipse/eclipse_cpp_project.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_cpp_project.thumb.png" class="screenshot" alt="" /></a>
			<p>Als nächstes muss ein neues C++ Projekt angelegt werden.</p>
		</div>
		
		<div>
			<a href="images/eclipse/eclipse_cpp_project_settings.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_cpp_project_settings.thumb.png" class="screenshot" alt="" /></a>
			<p>Wähle zuerst einen Projekt Namen. Hier wird als Beispiel xpcc als Eclipse-Projekt
			angelegt, dementsprechend wird als Name <em>xpcc</em> verwendet.</p>
			
			<p>Will man später die Subversion-Erweitung von Eclipse verwenden ist
			es wichtig das Projekt nicht im Workspace anzulegen, sondern an der
			Stelle an der die Dateien auch auf der Festplatte liegen. Dazu den Hacken
			bei <em>Use default location</em> entfernen und passenden Pfad auswählen.</p>
		</div>
		<div>
			<p>Wähle zuerst <em>Project type &raquo; Makefile Project &raquo; Empty Project</em>,
			dann <em>Toolchains &raquo; -- Other Toolchain --</em>. Die Wahl der Toolchain
			beeinflusst die Dateien und Defines die Standardmäßig gesetzt sind.</p>
		</div>
		
		<div>
			<a href="images/eclipse/eclipse_editor.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_editor.thumb.png" class="screenshot" alt="" /></a>
			<p>Über den <em>Project Explorer</em> kann man jetzt einzelne Quellcode-Dateien
			öffnen. Allerdings werden die xpcc-Include-Dateien und Funktionen noch nicht als solche
			erkannt.</p>
		</div>
		
		<h2>Weitere Einstellungen</h2>
		
		<div>
			<a href="images/eclipse/eclipse_path_xpcc.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_path_xpcc.thumb.png" class="screenshot" alt="" /></a>
			<p>Dazu öffnet man <em>Project &raquo; Properties &raquo; C/C++ General &raquo; Paths and Symbols</em>. Hier
			trägt man den Pfad zum <code>src</code>-Ordner von xpcc ein.</p>
		</div>
		
		<div>
			<a href="images/eclipse/eclipse_path_avrgcc.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_path_avrgcc.thumb.png" class="screenshot" alt="" /></a>
			<p>Gleiches macht man jetzt auch noch für die verwendete Toolchain. Für
			avr-gcc ist das der <code>avr/include</code> Ordner im Installationsordner.
			Bei mir ist dies <code>/opt/avr/avr/include</code>. Bei Windows könnte
			dies <code>C:\Program Files\Atmel\AVR Studio 5.0\AVR Toolchain\avr\include</code> sein.</p>
			<p>Für Sourcery CodeBench Lite Edition for ARM wäre es je nach Installation
			zum Beispiel <code>/opt/arm-none-eabi/arm-none-eabi/include</code>.</p>
		</div>
		
		<div>
			<a href="images/eclipse/eclipse_path_indexer.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_path_indexer.thumb.png" class="screenshot" alt="" /></a>
			<p>Unter <em>Symbols</em> können Defines vorgegeben werden die Eclipse
			dann bei der Anzeige berücksichtigt. Hier wurde der Wert <code>__AVR__</code>
			eingetragen, welcher ansonsten standardmäßig vom Compiler erzeugt wird.</p>
			<p>Diese Einstellungen sind aber nicht zwingend notwendig und können auch alle 
			später noch geändert werden.</p>
			<p>Sind Pfade und Symbole eingestellt muss der Indexer einmal durchlaufen
			damit alle Einstellungen übernommen werden. Danach sollten alle Include-Dateien
			und xpcc-Funktionen von Eclipse erkannt werden.</p>
		</div>
		
		<div>
			<a href="images/eclipse/eclipse_env_path.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_env_path.thumb.png" class="screenshot" alt="" /></a>
			<p>Eclipse verwendet eigene Shell. Deswegen werden zum Beispiel Einstellungen die
			man in <code>.bashrc</code> vornimmt nicht übernommen. Damit Eclipse den Compiler
			findet muss dieser entweder in den Standard-Pfaden liegen oder extra eingetragen werden.</p>
			<p>Dazu <em>C/C++ Build &raquo; Environment</em> eine neue Variable <code>PATH</code>
			mit dem Inhalt <code>${PATH}</code> anlegen.</p>
		</div>
		
		<div>
			<a href="images/eclipse/eclipse_path_check.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_path_check.thumb.png" class="screenshot" alt="" /></a>
			<p>Eclipse übernimmt dann den aktuellen Wert von <code>PATH</code>. Man sollte
			aber noch einmal überprüfen ob der Pfad zum Compiler wirklich enthalten ist. Dazu editiert
			man nochmal die eben angelegte Variante. Eclipse sollte jetzt den Wert von PATH aufgelöst haben
			und einzelne Verzeichnisse eingetragen haben. Im Beispiel sieht man das 
			<code>/opt/avr/bin</code> enthalten ist. Unter Windows müsste es enstprechend
			<code>C:\Program Files\Atmel\AVR Studio 5.0\AVR Toolchain\bin</code> sein.</p>
		</div>
		
		<h2>Build-Configuration</h2>
		
		<p>Als nächstes geht es darum den Code aus Eclipse heraus compilieren zu lassen.</p>
		
		<div>
			<a href="images/eclipse/eclipse_build_settings.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_build_settings.thumb.png" class="screenshot" alt="" /></a>
			<p>Da wir nicht Make sondern SCons verwenden muss der Hacken bei <em>Use default build
			command</em> entfernt werden und <code>scons</code> als <em>Build command</em>
			eintragen werden. Unter Windows muss diese <code>scons.bat</code> sein!</p>
			<p>Ins <em>Build directory</em> kommt der Pfad zur SConstruct-Datei des Projektes. Dadurch lässt sich
			das Projekt später per <em>Strg + B</em> bauen. Eine andere Möglichkeit dazu sind Make-Targets
			die </p>
		</div>
		
		<div>
			<a href="images/eclipse/eclipse_build_behavior.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_build_behavior.thumb.png" class="screenshot" alt="" /></a>
			<p>Im Reiter <em>Behaviour</em> wird bei <em>Clean</em> ein <code>-c</code> eingetragen.</p>
			<p>Um das compilieren zu Beschleunigen kann man, je nach Anzahl der verbauten CPUs des Rechners,
			ein Häckchen bei <em>Use parallel build</em> setzten und bei <em>use parallel jobs</em> zum
			Beispiel 2 eintragen. Man muss nur beachten immer eine
			Zahl vorzugeben, <em>Use optimal jobs number</em> funktioniert bei SCons <b>nicht</b>!</p>
		</div>
		
		<div>
			<a href="images/eclipse/eclipse_build_success.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_build_success.thumb.png" class="screenshot" alt="" /></a>
			<p>Drückt man nun <em>Strg + B</em> sollte jetzt im <em>Console</em>-Reiter die
			Ausgabe von SCons durchlaufen und das gesamte Projekt gebaut werden.</p>
		</div>
		
		<div>
			<p>Hat man innerhalb eines Eclipse-Projektes mehrere Projekte
			Mikrocontroller-Projekte die einzeln kompiliert werden sollen gibt
			es zwei Möglichkeiten:<br />
			Entweder man legt für Projekt eine eigne Build-Configuration an
			oder man verwendet Make-Targets. Schauen wir zuerst nach dem
			Build-Configurations:
			<ul>
				<li>Gehe zu <em>Project &raquo; Properties &raquo; C/C++ Build</em>
					und klick auf <em>Manage Configurations</em></li>
				<li>Erstelle mit <em>New</em> eine neue Konfiguration</li>
				<li>Wähle bei <em>Copy settings from &raquo; Exisiting Configuration</em>
					die Konfiguration die der neu zu erstellenden am ähnlichsten
					ist. Das erspart etwas Arbeit.</li>
				<li>Zurück bei <em>C/C++ Build</em> wähle bei <em>Configuration</em>
					die neu erzeugte Konfiguration aus und passe den Wert
					für <em>Build directory</em> an.</li>
				<li>Falls SCons noch weitere Paramter mitgegeben werden sollen
					(beispielsweise <code>scons target=pc</code>) ändere auch
					noch den Wert für <em>Build command</em>.</li>
			</ul>
			Über <em>Manage Configurations &raquo; Set Active</em> können die
			verschiedenen Konfigurationen dann ausgewählt werden. Strg + B
			erstellt dann die aktuelle Konfiguration.
			</p>
    	</div>
		
		<h2>Make Targets</h2>
		
		<div>
			<a href="images/eclipse/eclipse_make_target.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_make_target.thumb.png" class="screenshot" alt="" /></a>
			<p>Eine weitere Möglichkeit sind zum starten von SCons sind Make-Targets.
			Insbesondere für zusätzliche Aktionen die ausgeführt werden sollen, wie
			zum Beispiel das Programmieren aus Eclipse heraus, eigenen sie sich sehr
			gut.</p>
			
			<p>Man wählt im <em>Project-Explorer</em> das Verzeichnis aus in dem später SCons
			ausgeführt werden soll und erstellt ein neues Target.</p>
		</div>
		
		<div>
			<a href="images/eclipse/eclipse_make_target_all.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_make_target_all.thumb.png" class="screenshot" alt="" /></a>
			<p>Da wir vorher schon beim <em>Build command</em> SCons eingetragen haben
			wird dies direkt hier übernommen. </p>
		</div>
		
		<div>
			<a href="images/eclipse/eclipse_make_target_clean.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_make_target_clean.thumb.png" class="screenshot" alt="" /></a>
			<p>Genauso kann man ein <code>clean</code>- oder <code>program</code>-Target
			anlegen.</p>
		</div>
		
		<div>
			<a href="images/eclipse/eclipse_make_target_clean2.png" class="highslide" onclick="return hs.expand(this)" title="">
				<img src="images/eclipse/eclipse_make_target_clean2.thumb.png" class="screenshot" alt="" /></a>
			<p>Die Targets tauchen dann im Reiter <em>Make Targets</em> auf.</p>
		</div>
		
		<h2>Hinweise</h2>
		
		<ul>
			<li>Falls ein Fehler wie <code>sh: avr-g++: not found</code> auftritt,
			überprüfen ob unter <em>Project &raquo; Properties &raquo; Build C/C++ &raquo; Environment</em>
			ein korrekter Wert für <code>PATH</code> eingetragen ist (siehe oben).</li>
		</ul>
		
		<div><p>Zurück zur <a href="install_windows.html">Installationsanleitung</a>.</p></div>
	</div>
	
	<div style="clear: both;">&nbsp;</div>
</div>
</div>

<div id="footer">
	<p>&copy; <a href="http://www.roboterclub.rwth-aachen.de">Roboterclub Aachen e.V.</a> &bull;
		Project hosted on <a href="http://sourceforge.net/projects/xpcc">
			<img src="http://sflogo.sourceforge.net/sflogo.php?group_id=276149&amp;type=16" width="150" height="40" alt="Get Cross Platform Component Communication at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a> &bull;
		<a href="http://sourceforge.net/about">About</a> &bull;
		<a href="http://sourceforge.net/tos/tos.php">Legal</a> &bull;
		<a href="http://sourceforge.net/support">Help</a></p>
</div>

</body>
</html>
