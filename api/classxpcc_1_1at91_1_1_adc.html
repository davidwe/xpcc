<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>XPCC: xpcc::at91::Adc Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">XPCC
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classxpcc_1_1at91_1_1_adc.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">xpcc::at91::Adc Class Reference<div class="ingroups"><a class="el" href="group__at91.html">AT91SAM7xxx</a></div></div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="xpcc::at91::Adc" -->
<p>Analog-to-Digital Converter (ADC)  
 <a href="classxpcc_1_1at91_1_1_adc.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="arm7_2at91_2adc_8hpp_source.html">xpcc/architecture/platform/arm7/at91/adc.hpp</a>&gt;</code></p>

<p><a href="classxpcc_1_1at91_1_1_adc-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>Channel</b> { <br/>
&#160;&#160;<b>CHANNEL_0</b> =  0, 
<b>CHANNEL_1</b> =  1, 
<b>CHANNEL_2</b> =  2, 
<b>CHANNEL_3</b> =  3, 
<br/>
&#160;&#160;<b>CHANNEL_4</b> =  4, 
<b>CHANNEL_5</b> =  5, 
<b>CHANNEL_6</b> =  6, 
<b>CHANNEL_7</b> =  7
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1at91_1_1_adc.html#a18dd7bbbb09020a82013cd5089b3bac1">initialize</a> (uint32_t adcClock=5e6, uint32_t startupTime=20, uint32_t sampleAndHoldTime=600)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize A/D converter.  <a href="#a18dd7bbbb09020a82013cd5089b3bac1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1at91_1_1_adc.html#a48fd8192816e1e18d7f3662bef81fed8">enableChannel</a> (uint8_t channel)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable channel.  <a href="#a48fd8192816e1e18d7f3662bef81fed8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1at91_1_1_adc.html#a15a8335533d96e0c99a185e4a9b523bc">disableChannel</a> (uint8_t channel)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Disabled channel.  <a href="#a15a8335533d96e0c99a185e4a9b523bc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2d5b7c47d202ea1fcffbda33c4cecdb0"></a><!-- doxytag: member="xpcc::at91::Adc::startConversion" ref="a2d5b7c47d202ea1fcffbda33c4cecdb0" args="()" -->
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1at91_1_1_adc.html#a2d5b7c47d202ea1fcffbda33c4cecdb0">startConversion</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the conversion on all enabled channels. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1at91_1_1_adc.html#a3de4164207935c47f483c833280df936">isFinished</a> (uint8_t channel)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the conversion is finished.  <a href="#a3de4164207935c47f483c833280df936"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1at91_1_1_adc.html#a71924f29822e853d0f0d7466f19cdb44">isFinished</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if all conversion of the currently enabled channels are finished.  <a href="#a71924f29822e853d0f0d7466f19cdb44"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1at91_1_1_adc.html#a6b2b80197f5fe9f60a1ad98a818be7b5">getValue</a> (uint8_t channel)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get result of a conversion.  <a href="#a6b2b80197f5fe9f60a1ad98a818be7b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac7b39941bded6edf0e19b998267eab64"></a><!-- doxytag: member="xpcc::at91::Adc::getLastConvertedValue" ref="ac7b39941bded6edf0e19b998267eab64" args="()" -->
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>getLastConvertedValue</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7b90cc646758a788943ac621786bf3d2"></a><!-- doxytag: member="xpcc::at91::Adc::enableInterrupt" ref="a7b90cc646758a788943ac621786bf3d2" args="(uint8_t channel)" -->
static void&#160;</td><td class="memItemRight" valign="bottom"><b>enableInterrupt</b> (uint8_t channel)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5cd5ef6d45c1b8f4779340349f1b8bcd"></a><!-- doxytag: member="xpcc::at91::Adc::disableInterrupt" ref="a5cd5ef6d45c1b8f4779340349f1b8bcd" args="(uint8_t channel)" -->
static void&#160;</td><td class="memItemRight" valign="bottom"><b>disableInterrupt</b> (uint8_t channel)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1at91_1_1_adc.html#af8f1ae322dfe9a8058d3f4de25d3b45f">registerInterruptHandler</a> (Aic::Handler function)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a interrupt handler function.  <a href="#af8f1ae322dfe9a8058d3f4de25d3b45f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a95a42a01af1bb8fda0b3b89c797cabbf"></a><!-- doxytag: member="xpcc::at91::Adc::removeInterruptHandler" ref="a95a42a01af1bb8fda0b3b89c797cabbf" args="()" -->
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1at91_1_1_adc.html#a95a42a01af1bb8fda0b3b89c797cabbf">removeInterruptHandler</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove interrupt handler and disable the interrupt. <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>The ADC Controller clock (MCK) is always clocked.</p>
<p>The analog input pins can be multiplexed with PIO lines. In this case, the assignment of the ADC input is automatically done as soon as the corresponding channel is enabled. By default, after reset, the PIO line is configured as input with its pull-up enabled and the ADC input is connected to the GND.</p>
<dl class="date"><dt><b>Date:</b></dt><dd>July 2011</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Fabian Greif </dd></dl>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a18dd7bbbb09020a82013cd5089b3bac1"></a><!-- doxytag: member="xpcc::at91::Adc::initialize" ref="a18dd7bbbb09020a82013cd5089b3bac1" args="(uint32_t adcClock=5e6, uint32_t startupTime=20, uint32_t sampleAndHoldTime=600)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void xpcc::at91::Adc::initialize </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>adcClock</em> = <code>5e6</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>startupTime</em> = <code>20</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>sampleAndHoldTime</em> = <code>600</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>f_adc = MCK / ( (PRESCAL + 1) * 2 ) Startup Time = (STARTUP+1) * 8 / f_adc Sample &amp; Hold Time = SHTIM / f_adc</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">adcClock</td><td>ADC clock in Hz (default = 5 MHz) </td></tr>
    <tr><td class="paramname">startupTime</td><td>Start up time when returning from Idle Mode in µs (default = 20µs) </td></tr>
    <tr><td class="paramname">sampleAndHoldTime</td><td>Sample and hold time in ns (default = 600ns)</td></tr>
  </table>
  </dd>
</dl>
<p>Maximum clock frequency for 10-bit resolution is 5 MHz and 8 Mhz for 8-bit resolution. This equals a throughput rate of 384 or 533 kSPS (3 (5 for 8 Mhz) clock cycles for track and hold acquisition time and 10 clock cycles for conversion). </p>

<p>Definition at line <a class="el" href="arm7_2at91_2adc_8hpp_source.html#l00093">93</a> of file <a class="el" href="arm7_2at91_2adc_8hpp_source.html">arm7/at91/adc.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a48fd8192816e1e18d7f3662bef81fed8"></a><!-- doxytag: member="xpcc::at91::Adc::enableChannel" ref="a48fd8192816e1e18d7f3662bef81fed8" args="(uint8_t channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void xpcc::at91::Adc::enableChannel </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>[0..7] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a15a8335533d96e0c99a185e4a9b523bc"></a><!-- doxytag: member="xpcc::at91::Adc::disableChannel" ref="a15a8335533d96e0c99a185e4a9b523bc" args="(uint8_t channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void xpcc::at91::Adc::disableChannel </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>[0..7] </td></tr>
  </table>
  </dd>
</dl>
<dl class="warning"><dt><b>Warning:</b></dt><dd>If the corresponding channel is disabled during a conversion or if it is disabled then reenabled during a conversion, its associated data and its corresponding flags are unpredictable. </dd></dl>

</div>
</div>
<a class="anchor" id="a3de4164207935c47f483c833280df936"></a><!-- doxytag: member="xpcc::at91::Adc::isFinished" ref="a3de4164207935c47f483c833280df936" args="(uint8_t channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool xpcc::at91::Adc::isFinished </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Flag is reset by a read of <a class="el" href="classxpcc_1_1at91_1_1_adc.html#a6b2b80197f5fe9f60a1ad98a818be7b5" title="Get result of a conversion.">getValue()</a>.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classxpcc_1_1at91_1_1_adc.html#a6b2b80197f5fe9f60a1ad98a818be7b5" title="Get result of a conversion.">getValue()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a71924f29822e853d0f0d7466f19cdb44"></a><!-- doxytag: member="xpcc::at91::Adc::isFinished" ref="a71924f29822e853d0f0d7466f19cdb44" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool xpcc::at91::Adc::isFinished </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Flag is reset is <b>one</b> of the channels is read (via <a class="el" href="classxpcc_1_1at91_1_1_adc.html#a6b2b80197f5fe9f60a1ad98a818be7b5" title="Get result of a conversion.">getValue()</a>).</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classxpcc_1_1at91_1_1_adc.html#a6b2b80197f5fe9f60a1ad98a818be7b5" title="Get result of a conversion.">getValue()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a6b2b80197f5fe9f60a1ad98a818be7b5"></a><!-- doxytag: member="xpcc::at91::Adc::getValue" ref="a6b2b80197f5fe9f60a1ad98a818be7b5" args="(uint8_t channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t xpcc::at91::Adc::getValue </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>Channel number [0..7] </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>10-Bit conversion result. The remaining upper 22-bit will always be zero. The result is valid until the next conversion. </dd></dl>

</div>
</div>
<a class="anchor" id="af8f1ae322dfe9a8058d3f4de25d3b45f"></a><!-- doxytag: member="xpcc::at91::Adc::registerInterruptHandler" ref="af8f1ae322dfe9a8058d3f4de25d3b45f" args="(Aic::Handler function)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void xpcc::at91::Adc::registerInterruptHandler </td>
          <td>(</td>
          <td class="paramtype">Aic::Handler&#160;</td>
          <td class="paramname"><em>function</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The handler function needs to read PIT_PIVR in order to acknowledge the interrupt. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="arm7_2at91_2adc_8hpp_source.html">arm7/at91/adc.hpp</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>xpcc</b>      </li>
      <li class="navelem"><a class="el" href="namespacexpcc_1_1at91.html">at91</a>      </li>
      <li class="navelem"><a class="el" href="classxpcc_1_1at91_1_1_adc.html">Adc</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer" />
<address class="footer"><small>Generated on Mon Mar 5 2012 19:28:11 for XPCC by&nbsp;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen" border="0" /></a> 1.7.5</small></address>

<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://sourceforge.net/apps/piwik/xpcc/" : "http://sourceforge.net/apps/piwik/xpcc/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/javascript">
try {
	var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
	piwikTracker.trackPageView();
	piwikTracker.enableLinkTracking();
} catch( err ) {}
</script>
<noscript>
<p><img src="http://sourceforge.net/apps/piwik/xpcc/piwik.php?idsite=1" style="border:0" alt=""/></p>
</noscript>
<!-- End Piwik Tag -->

</body>
</html>
