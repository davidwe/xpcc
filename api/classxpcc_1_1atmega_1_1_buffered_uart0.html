<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>xpcc: xpcc::atmega::BufferedUart0 Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">xpcc
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classxpcc_1_1atmega_1_1_buffered_uart0.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">xpcc::atmega::BufferedUart0 Class Reference<div class="ingroups"><a class="el" href="group__atmega.html">megaAVR</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="xpcc::atmega::BufferedUart0" -->
<p>UART0.  
 <a href="classxpcc_1_1atmega_1_1_buffered_uart0.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="avr_2atmega_2uart_2uart0_8hpp_source.html">xpcc/architecture/platform/avr/atmega/uart/uart0.hpp</a>&gt;</code></p>

<p><a href="classxpcc_1_1atmega_1_1_buffered_uart0-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a72b17300daa668fee670999e38ad66bd"></a><!-- doxytag: member="xpcc::atmega::BufferedUart0::BufferedUart0" ref="a72b17300daa668fee670999e38ad66bd" args="(uint32_t baudrate)" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>BufferedUart0</b> (uint32_t baudrate)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1atmega_1_1_buffered_uart0.html#aa8128d7112e78f7a1c7541ec6b5bced4">setBaudrate</a> (uint32_t baudrate, bool u2x=false)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set baudrate.  <a href="#aa8128d7112e78f7a1c7541ec6b5bced4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a95a63c4b1508615776f616b8eca3ecfe"></a><!-- doxytag: member="xpcc::atmega::BufferedUart0::write" ref="a95a63c4b1508615776f616b8eca3ecfe" args="(uint8_t data)" -->
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1atmega_1_1_buffered_uart0.html#a95a63c4b1508615776f616b8eca3ecfe">write</a> (uint8_t data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a single byte. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a18053c4a786dbbc72eedc68c1f3c80b1"></a><!-- doxytag: member="xpcc::atmega::BufferedUart0::read" ref="a18053c4a786dbbc72eedc68c1f3c80b1" args="(uint8_t &amp;c)" -->
static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1atmega_1_1_buffered_uart0.html#a18053c4a786dbbc72eedc68c1f3c80b1">read</a> (uint8_t &amp;c)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a single byte. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1atmega_1_1_buffered_uart0.html#a67b804f126bb4fa215158747af761aa8">readErrorFlags</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether any errors occured during receiving Be aware that these indicate an error that occured somewhere since resetting the Error Flags (with resetErrorFlags()), so you cannot tell which byte had the error.  <a href="#a67b804f126bb4fa215158747af761aa8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abd8019f221b17ad37d073d5721c148ea"></a><!-- doxytag: member="xpcc::atmega::BufferedUart0::resetErrorFlags" ref="abd8019f221b17ad37d073d5721c148ea" args="()" -->
static void&#160;</td><td class="memItemRight" valign="bottom"><b>resetErrorFlags</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1atmega_1_1_buffered_uart0.html#ae6b1eecd2b87e5e338e5574670617a4b">flushReceiveBuffer</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structxpcc_1_1_empty.html" title="Empty struct which can be used as a placeholder.">Empty</a> the receive FIFO queue and UART buffer.  <a href="#ae6b1eecd2b87e5e338e5574670617a4b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1atmega_1_1_buffered_uart0.html#a0a885e2ebb8d84d32a3e03b30002d7a8">read</a> (uint8_t *buffer, uint8_t n)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a block of bytes.  <a href="#a0a885e2ebb8d84d32a3e03b30002d7a8"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae35625f86713e12e9933e1780b1390f1"></a><!-- doxytag: member="xpcc::atmega::BufferedUart0::setBaudrateRegister" ref="ae35625f86713e12e9933e1780b1390f1" args="(uint16_t ubrr)" -->
static void&#160;</td><td class="memItemRight" valign="bottom"><b>setBaudrateRegister</b> (uint16_t ubrr)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Example: </p>
<div class="fragment"><pre class="fragment">
<span class="preprocessor">#include &lt;xpcc/architecture/platform.hpp&gt;</span>

<span class="comment">// Create a new UART object and configure it to a baudrate of 115200</span>
<a class="code" href="classxpcc_1_1atmega_1_1_buffered_uart0.html" title="UART0.">xpcc::atmega::BufferedUart0</a> uart(115200);

<span class="keywordtype">int</span>
main()
{
    <span class="comment">// Enable interrupts, this is needed for every buffered UART</span>
    sei();
    
    <span class="comment">// Write some characters</span>
    uart.write(<span class="charliteral">&#39;H&#39;</span>);
    uart.write(<span class="charliteral">&#39;e&#39;</span>);
    uart.write(<span class="charliteral">&#39;l&#39;</span>);
    uart.write(<span class="charliteral">&#39;l&#39;</span>);
    uart.write(<span class="charliteral">&#39;o&#39;</span>);
    uart.write(<span class="charliteral">&#39;\n&#39;</span>);
    
    <span class="keywordflow">while</span> (1)
    {
    }
}
</pre></div><p>This implementation uses a ringbuffer. The size of the ringbuffer can be changed in the <code>project.cfg</code> file.</p>
<p>Just add add a value for UART0_TX_BUFFER_SIZE and/or UART0_RX_BUFFER_SIZE in the <code>defines</code> section. The size can be any value between 1 and 254.</p>
<p>Example: </p>
<div class="fragment"><pre class="fragment"> [defines]
 UART0_TX_BUFFER_SIZE = 20
 UART0_RX_BUFFER_SIZE = 30
</pre></div> 
<p>Definition at line <a class="el" href="avr_2atmega_2uart_2uart0_8hpp_source.html#l00068">68</a> of file <a class="el" href="avr_2atmega_2uart_2uart0_8hpp_source.html">avr/atmega/uart/uart0.hpp</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aa8128d7112e78f7a1c7541ec6b5bced4"></a><!-- doxytag: member="xpcc::atmega::BufferedUart0::setBaudrate" ref="aa8128d7112e78f7a1c7541ec6b5bced4" args="(uint32_t baudrate, bool u2x=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="classxpcc_1_1atmega_1_1_buffered_uart0.html#aa8128d7112e78f7a1c7541ec6b5bced4">xpcc::atmega::BufferedUart0::setBaudrate</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>baudrate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>u2x</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If this function is called with a constant value as parameter all the calculation is done by the compiler. This way no 32-bit arithmetic is needed at run-time!</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">baudrate</td><td>desired baud rate </td></tr>
    <tr><td class="paramname">u2x</td><td>enabled double speed mode </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="avr_2atmega_2uart_2uart0_8hpp_source.html#l00087">87</a> of file <a class="el" href="avr_2atmega_2uart_2uart0_8hpp_source.html">avr/atmega/uart/uart0.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a67b804f126bb4fa215158747af761aa8"></a><!-- doxytag: member="xpcc::atmega::BufferedUart0::readErrorFlags" ref="a67b804f126bb4fa215158747af761aa8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t <a class="el" href="classxpcc_1_1atmega_1_1_buffered_uart0.html#a67b804f126bb4fa215158747af761aa8">xpcc::atmega::BufferedUart0::readErrorFlags</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd><code>0</code> if no errors occured, otherwise a value that corresponds to the Error Flags in register A. </dd></dl>

</div>
</div>
<a class="anchor" id="ae6b1eecd2b87e5e338e5574670617a4b"></a><!-- doxytag: member="xpcc::atmega::BufferedUart0::flushReceiveBuffer" ref="ae6b1eecd2b87e5e338e5574670617a4b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t <a class="el" href="classxpcc_1_1atmega_1_1_buffered_uart0.html#ae6b1eecd2b87e5e338e5574670617a4b">xpcc::atmega::BufferedUart0::flushReceiveBuffer</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the size of the deleted FIFO queue. </dd></dl>

</div>
</div>
<a class="anchor" id="a0a885e2ebb8d84d32a3e03b30002d7a8"></a><!-- doxytag: member="xpcc::atmega::BufferedUart0::read" ref="a0a885e2ebb8d84d32a3e03b30002d7a8" args="(uint8_t *buffer, uint8_t n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t <a class="el" href="classxpcc_1_1atmega_1_1_buffered_uart0.html#a18053c4a786dbbc72eedc68c1f3c80b1">xpcc::atmega::BufferedUart0::read</a> </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*buffer</td><td>Pointer to a buffer big enough to storage <em>n</em> bytes </td></tr>
    <tr><td class="paramname">n</td><td>Number of bytes to be read</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of bytes which could be read, maximal <em>n</em> </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="avr_2atmega_2uart_2uart0_8hpp_source.html">avr/atmega/uart/uart0.hpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>xpcc</b>      </li>
      <li class="navelem"><b>atmega</b>      </li>
      <li class="navelem"><a class="el" href="classxpcc_1_1atmega_1_1_buffered_uart0.html">BufferedUart0</a>      </li>
<hr class="footer" />
<address class="footer"><small>Generated on Wed May 2 2012 15:17:41 for xpcc by&nbsp;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen" border="0" /></a> 1.7.6.1</small></address>

<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://sourceforge.net/apps/piwik/xpcc/" : "http://sourceforge.net/apps/piwik/xpcc/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/javascript">
try {
	var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
	piwikTracker.trackPageView();
	piwikTracker.enableLinkTracking();
} catch( err ) {}
</script>
<noscript>
<p><img src="http://sourceforge.net/apps/piwik/xpcc/piwik.php?idsite=1" style="border:0" alt=""/></p>
</noscript>
<!-- End Piwik Tag -->

</body>
</html>
