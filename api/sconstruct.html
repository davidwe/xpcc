<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>XPCC: 3.2 SConstruct files: An introduction</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">XPCC
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('sconstruct.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">3.2 SConstruct files: An introduction </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>The SConstruct files are the equivalent of Makefiles, they define the targets that SCons will create during the build process.</p>
<h2><a class="anchor" id="introduction"></a>
Introduction to SConstruct files</h2>
<p>Every project using SCons must have a SConstruct file. This file directs the operation of the build. The format of the SConstruct files should be very familiar for Python users. This is no surprize, as Scons uses Python, the full power of the Python programming language is at your disposal.</p>
<p>You can use everything that Python offers in the SConstruct files. Altough this offers a lot of possiblies it mostly isn't needed.</p>
<p>For everyone unfamiliar with Python the most important things in short:</p>
<ul>
<li>Comments can be started with a pound(#) and continue until the end of the line.</li>
<li>Indentation matters! Where you would use braces in languages like C or C++ Python uses indentation. As a rule of thumb, don't use indentation in your SConstruct files unless you made yourself familiar with Python.</li>
<li>Strings are enclosed in either double quotation marks("") or single quotation marks(''). Both forms are equal!</li>
</ul>
<h3><a class="anchor" id="lists"></a>
Lists</h3>
<p>Many of the operations that are used in SCons require the use of lists. A list is encapsulated with brackets('[]'). Each list item is followed by a comma, inside these brackets. For example, this would be a list of numbers: [4, 2, 1, 4]. Most of the time though, we will be using lists of strings: ["foo.cpp", "bar.cpp", "blub.c"]</p>
<p>For more information have a look at the python tutorial:</p>
<ul>
<li><a href="http://docs.python.org/tutorial/">The offical Python tutorial</a></li>
<li><a href="http://abop-german.berlios.de/">A Byte of Python - Online book (German)</a></li>
</ul>
<h2><a class="anchor" id="program"></a>
Building a Simple Program</h2>
<h3><a class="anchor" id="environment"></a>
The Environment</h3>
<p>In order to interact with SCons, the first thing done in an SConstruct file is to create an Environment. Environments contain various information about the system including compiler flags, linker flags, and so on.</p>
<div class="fragment"><pre class="fragment">
env = Environment()
</pre></div><p>This will create a default environment, trying to determine the default settings for your system. If you want to write programs for the platform you're currently programming on this will be fine, but to use XPCC we need to tell SCons about it.</p>
<p>This is done by something called tools. Tools are packages that tell SCons what to do with files, how they should be build, which program to invoke etc.</p>
<div class="fragment"><pre class="fragment">
env = Environment(toolpath = ['path/to/xpcc/scons'], tools = ['xpcc'])
</pre></div><p>The tool for XPCC is called ... surprise: !xpcc. Because SCons don't know by default where to find this tool we have to specifiy its toolpath, this is path where SCons will look for a file called 'xpcc.py'. Make sure that this path points to the /scons subfolder of the XPCC project folder.</p>
<p>A more detailed description can be found at the page about our <a class="el" href="scons_tools.html">SCons tools</a>.</p>
<h3><a class="anchor" id="creating"></a>
Creating a Program</h3>
<p>The environment is not a simple variable. It is an object with various methods or subroutines of it's own. The methods and subroutines allow the creation of programs whether they are in Java, C++, or C. Let's create a simple C++ program. Once the environment is created, the program creation is simple:</p>
<div class="fragment"><pre class="fragment">
env.Program(target = 'helloworld', source = ["main.cpp"])
</pre></div><p>Here we introduce several new concepts. First, the target. A target in SCons is similar to targets in make. The target is the logical result of the operation. Here, the target is the program <code>helloworld</code>. Note that it is not necessary to write <code>helloworld.exe</code>. The extension is chosen by SCons for you. Targets are built from a list of sources. Here the list of sources contains only one item: the C++ file "main.cpp". SCons will automatically pick a compiler, and compile time flags to compile the source for you.</p>
<p>SCons understand and can build a vast array of source types:</p>
<ul>
<li>.c - a C source file</li>
<li>.cpp/.c++/.C++/.cxx/.cc - a C++ source file</li>
<li>.f/.for/.fpp - Fortran with optional C preprocessor in POSIX</li>
<li>.S - an assembly file with optional C preprocessor in POSIX</li>
</ul>
<p>Other languages are available via special tools.</p>
<p>That was an introduction into the basics of SConstruct files. Let's go to the <a class="el" href="sconstruct_advanced.html">advanced topics</a> to show you want SCons can really do. </p>
</div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="index.html">Cross Platform Component Communication</a>      </li>
      <li class="navelem"><a class="el" href="build_system.html">3. Build system</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer" />
<address class="footer"><small>Generated on Mon Mar 5 2012 19:28:08 for XPCC by&nbsp;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen" border="0" /></a> 1.7.5</small></address>

<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://sourceforge.net/apps/piwik/xpcc/" : "http://sourceforge.net/apps/piwik/xpcc/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/javascript">
try {
	var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
	piwikTracker.trackPageView();
	piwikTracker.enableLinkTracking();
} catch( err ) {}
</script>
<noscript>
<p><img src="http://sourceforge.net/apps/piwik/xpcc/piwik.php?idsite=1" style="border:0" alt=""/></p>
</noscript>
<!-- End Piwik Tag -->

</body>
</html>
