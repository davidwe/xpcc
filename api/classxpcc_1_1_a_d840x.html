<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>XPCC: xpcc::AD840x&lt; Spi, Cs, Rs, Shdn &gt; Class Template Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">XPCC
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classxpcc_1_1_a_d840x.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">xpcc::AD840x&lt; Spi, Cs, Rs, Shdn &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__driver__other.html">Other</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="xpcc::AD840x" -->
<p>AD8400/2/3 Digital Potentiometers (1-,2-,4-Channel)  
 <a href="classxpcc_1_1_a_d840x.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ad840x_8hpp_source.html">xpcc/driver/other/ad840x.hpp</a>&gt;</code></p>

<p><a href="classxpcc_1_1_a_d840x-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad23b04f3e8cb238a427b54bc4d96a2e2"></a><!-- doxytag: member="xpcc::AD840x::initialize" ref="ad23b04f3e8cb238a427b54bc4d96a2e2" args="()" -->
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_a_d840x.html#ad23b04f3e8cb238a427b54bc4d96a2e2">initialize</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize SPI interface and set pins. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_a_d840x.html#a7f4fab3c7fe1826dd2d2bf064f749fe4">reset</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset channels.  <a href="#a7f4fab3c7fe1826dd2d2bf064f749fe4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_a_d840x.html#aab96e6384c48b7ab3c13f0cd6cdc8ece">shutdown</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter shutdown mode.  <a href="#aab96e6384c48b7ab3c13f0cd6cdc8ece"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a93f270aa2f22497183a54a7c90d93369"></a><!-- doxytag: member="xpcc::AD840x::resume" ref="a93f270aa2f22497183a54a7c90d93369" args="()" -->
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_a_d840x.html#a93f270aa2f22497183a54a7c90d93369">resume</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Resume normal mode after shutdown. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxpcc_1_1_a_d840x.html#a3ded5a84f5cda5947a60cccd6948bef8">setValue</a> (<a class="el" href="group__driver__other.html#ga4c936afae0f4c1ab27a131d65711d4ae">ad840x::Channel</a> channel, uint8_t data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a new register value.  <a href="#a3ded5a84f5cda5947a60cccd6948bef8"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Spi, typename Cs, typename Rs, typename Shdn&gt;<br/>
class xpcc::AD840x&lt; Spi, Cs, Rs, Shdn &gt;</h3>

<h2>Features</h2>
<ul>
<li>256-position variable resistance device</li>
<li>Replaces 1, 2, or 4 potentiometers</li>
<li>1 kΩ, 10 kΩ, 50 kΩ, 100 kΩ nominal resistance</li>
<li>3-wire, SPI-compatible serial data input</li>
<li>10 MHz update data loading rate</li>
<li>2.7 V to 5.5 V single-supply operation</li>
</ul>
<p>The nominal resistance of the VR (Variable Resistor) (RDAC) between Terminal A and Terminal B is available with values of 1 kΩ, 10 kΩ, 50 kΩ, and 100 kΩ. The final digits of the part number determine the nominal resistance value; that is, 10 kΩ = 10; 100 kΩ = 100 etc.</p>
<p>The nominal resistance (RAB) of the VR has 256 contact points accessible by the wiper terminal. The <a class="el" href="classxpcc_1_1_a_d840x.html" title="AD8400/2/3 Digital Potentiometers (1-,2-,4-Channel)">AD840x</a> do not have power-on midscale preset, so the wiper can be at any random position at power-up.</p>
<h2>Serial Connection</h2>
<p>Data is shifted in on the positive edges of the clock (SPI Mode 0). Maximum SPI frequency is 10 MHz.</p>
<p>The output is updated after the time ts after the rising edge of CS. ts depends on the nominal resistance value.</p>
<div class="fragment"><pre class="fragment"> Version | Time ts
 --------+---------
   10 kΩ |   2 µs
   50 kΩ |   9 µs
  100 kΩ |  18 µs
</pre></div><p>The serial data output (SDO) pin, which exists only on the AD8403 and not on the AD8400 or AD8402, contains an open-drain, n-channel FET that requires a pull-up resistor to transfer data to the SDI pin of the next package.</p>
<p>The pull-up resistor termination voltage may be larger than the VDD supply (but less than the max VDD of 8 V) of the AD8403 SDO output device.</p>
<dl class=""><dt><b>Template Parameters:</b></dt><dd>
  <table class="">
    <tr><td class="paramname">Spi</td><td>SPI interface (MISO pin is not used) </td></tr>
    <tr><td class="paramname">Cs</td><td>Chip-Select pin </td></tr>
    <tr><td class="paramname">Rs</td><td>Reset (low active), use xpcc::Unused for the AD8400 </td></tr>
    <tr><td class="paramname">Shdn</td><td>Shutdown (low active), use xpcc::Unused for the AD8400</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd>ad840x </dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Fabian Greif </dd></dl>

<p>Definition at line <a class="el" href="ad840x_8hpp_source.html#l00120">120</a> of file <a class="el" href="ad840x_8hpp_source.html">ad840x.hpp</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a7f4fab3c7fe1826dd2d2bf064f749fe4"></a><!-- doxytag: member="xpcc::AD840x::reset" ref="a7f4fab3c7fe1826dd2d2bf064f749fe4" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Spi , typename Cs , typename Rs , typename Shdn &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="classxpcc_1_1_a_d840x.html">xpcc::AD840x</a>&lt; Spi, Cs, Rs, Shdn &gt;::<a class="el" href="classxpcc_1_1_a_d840x.html#a7f4fab3c7fe1826dd2d2bf064f749fe4">reset</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Forces the whiper positions to 0x80 = 128 = midscale. </p>

</div>
</div>
<a class="anchor" id="aab96e6384c48b7ab3c13f0cd6cdc8ece"></a><!-- doxytag: member="xpcc::AD840x::shutdown" ref="aab96e6384c48b7ab3c13f0cd6cdc8ece" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Spi , typename Cs , typename Rs , typename Shdn &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="classxpcc_1_1_a_d840x.html">xpcc::AD840x</a>&lt; Spi, Cs, Rs, Shdn &gt;::<a class="el" href="classxpcc_1_1_a_d840x.html#aab96e6384c48b7ab3c13f0cd6cdc8ece">shutdown</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="warning"><dt><b>Warning:</b></dt><dd>Only for AD8402 and AD8403</dd></dl>
<p>Both parts have a power shutdown SHDN pin that places the VR (variable resistor) in a zero-power-consumption state where Terminal Ax is open-circuited and the Wiper Wx is connected to Terminal Bx, resulting in the consumption of only the leakage current in the VR.</p>
<p>The digital interface is still active in shutdown, except that SDO is deactivated. Code changes in the registers can be made during shutdown that will produce new wiper positions when the device is taken out of shutdown. </p>

</div>
</div>
<a class="anchor" id="a3ded5a84f5cda5947a60cccd6948bef8"></a><!-- doxytag: member="xpcc::AD840x::setValue" ref="a3ded5a84f5cda5947a60cccd6948bef8" args="(ad840x::Channel channel, uint8_t data)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Spi , typename Cs , typename Rs , typename Shdn &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="classxpcc_1_1_a_d840x.html">xpcc::AD840x</a>&lt; Spi, Cs, Rs, Shdn &gt;::<a class="el" href="classxpcc_1_1_a_d840x.html#a3ded5a84f5cda5947a60cccd6948bef8">setValue</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__driver__other.html#ga4c936afae0f4c1ab27a131d65711d4ae">ad840x::Channel</a>&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The wiper’s first connection starts at the B terminal for data 00H. This B terminal connection has a wiper contact resistance of 50 Ω. The second connection (for the 10 kΩ part) is the first tap point located at 89 Ω = [RAB (nominal resistance) + RW = 39 Ω + 50 Ω] for data 01H. The third connection is the next tap point representing 78 Ω + 50 Ω = 128 Ω for data 02H. Each LSB data value increase moves the wiper up the resistor ladder until the last tap point is reached at 10,011 Ω.</p>
<p>Note that the wiper does not directly connect to the B terminal even for data 00H.</p>
<div class="fragment"><pre class="fragment"> data | Rwb (Ohm) | Output State
 -----+-----------+-----------------
  255 |   10 011  | Full scale
  128 |    5 050  | Midscale (<a class="code" href="classxpcc_1_1_a_d840x.html#a7f4fab3c7fe1826dd2d2bf064f749fe4" title="Reset channels.">reset</a>() condition)
    1 |       89  | 1 LSB
    0 |       50  | Zero-scale (wiper contact resistance)
</pre></div><p>Rwb is the resistance between the wiper and Terminal B. The resitance for Terminal A is symmetrical:</p>
<div class="fragment"><pre class="fragment"> data | Rwa (Ohm) | Output State
 -----+-----------+-----------------
  255 |       89  | Full scale
  128 |    5 050  | Midscale (<a class="code" href="classxpcc_1_1_a_d840x.html#a7f4fab3c7fe1826dd2d2bf064f749fe4" title="Reset channels.">reset</a>() condition)
    1 |   10 011  | 1 LSB
    0 |   10 050  | Zero-scale
</pre></div><p>It is possible to set up all four channels at once by using the shutdown mode and then setting all four channels individually. After resuming normal operation the wipers will take their new positions.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>Channel which should be changed </td></tr>
    <tr><td class="paramname">data</td><td>New wiper value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="ad840x_8hpp_source.html">ad840x.hpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>xpcc</b>      </li>
      <li class="navelem"><a class="el" href="classxpcc_1_1_a_d840x.html">AD840x</a>      </li>
<hr class="footer" />
<address class="footer"><small>Generated on Mon Mar 5 2012 21:26:01 for XPCC by&nbsp;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen" border="0" /></a> 1.7.6.1</small></address>

<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://sourceforge.net/apps/piwik/xpcc/" : "http://sourceforge.net/apps/piwik/xpcc/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/javascript">
try {
	var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
	piwikTracker.trackPageView();
	piwikTracker.enableLinkTracking();
} catch( err ) {}
</script>
<noscript>
<p><img src="http://sourceforge.net/apps/piwik/xpcc/piwik.php?idsite=1" style="border:0" alt=""/></p>
</noscript>
<!-- End Piwik Tag -->

</body>
</html>
